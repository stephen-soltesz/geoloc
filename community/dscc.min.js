!function(R,C){"object"==typeof exports&&"object"==typeof module?module.exports=C():"function"==typeof define&&define.amd?define("dscc",[],C):"object"==typeof exports?exports.dscc=C():R.dscc=C()}(window,function(){return function(e){var E={};function t(R){if(E[R])return E[R].exports;var C=E[R]={i:R,l:!1,exports:{}};return e[R].call(C.exports,C,C.exports,t),C.l=!0,C.exports}return t.m=e,t.c=E,t.d=function(R,C,e){t.o(R,C)||Object.defineProperty(R,C,{enumerable:!0,get:e})},t.r=function(R){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(R,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(R,"__esModule",{value:!0})},t.t=function(C,R){if(1&R&&(C=t(C)),8&R)return C;if(4&R&&"object"==typeof C&&C&&C.__esModule)return C;var e=Object.create(null);if(t.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:C}),2&R&&"string"!=typeof C)for(var E in C)t.d(e,E,function(R){return C[R]}.bind(null,E));return e},t.n=function(R){var C=R&&R.__esModule?function(){return R.default}:function(){return R};return t.d(C,"a",C),C},t.o=function(R,C){return Object.prototype.hasOwnProperty.call(R,C)},t.p="",t(t.s="./src/index.ts")}({"./src/index.ts":function(R,_,C){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(R){for(var C,e=1,E=arguments.length;e<E;e++)for(var t in C=arguments[e])Object.prototype.hasOwnProperty.call(C,t)&&(R[t]=C[t]);return R}).apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0});var U=C("./src/types.ts");!function(R){for(var C in R)_.hasOwnProperty(C)||(_[C]=R[C])}(C("./src/types.ts")),_.getWidth=function(){return document.body.clientWidth},_.getHeight=function(){return document.documentElement.clientHeight};_.parseImage=function(R){var C=R.split("  "),e=C[0],E=C[1];return{altText:C[2],originalUrl:e,proxiedUrl:E}};var Y=function(R){return R.fields.reduce(function(R,C){return R[C.id]=C,R},{})},N=function(R){return R.type===U.ConfigDataElementType.DIMENSION||R.type===U.ConfigDataElementType.METRIC},r=function(R){return R===U.ConfigDataElementType.DIMENSION?-1:1},i=function(R){var C=[];R.config.data.forEach(function(R){R.elements.forEach(function(R){C.push(R)})});var e,E=C.filter(N),t=(e=function(R,C){return r(R.type)-r(C.type)},E.map(function(R,C){return{item:R,index:C}}).sort(function(R,C){return e(R.item,C.item)||R.index-C.index}).map(function(R){return R.item})),n=[];return t.forEach(function(R){R.value.forEach(function(){return n.push(R.id)})}),n};_.fieldsByConfigId=function(R){var C=Y(R),e={};return R.config.data.forEach(function(R){R.elements.forEach(function(R){e[R.id]=R.value.map(function(R){return C[R]})})}),e};var T=function(R){var C={};return(R.config.style||[]).forEach(function(R){R.elements.forEach(function(R){if(void 0!==C[R.id])throw new Error("styleIds must be unique. Your styleId: '"+R.id+"' is used more than once.");C[R.id]={value:R.value,defaultValue:R.defaultValue}})},{}),C};_.tableTransform=function(R){return{tables:(C=R,E=_.fieldsByConfigId(C),t=i(C),n={},N=t.map(function(R){void 0===n[R]?n[R]=0:n[R]++;var C=n[R],e=E[R][C];return o({},e,{configId:R})}),Y(C),(e={})[U.TableType.DEFAULT]={headers:[],rows:[]},r=e,C.dataResponse.tables.forEach(function(R){r[R.id]={headers:N,rows:R.rows}}),r),fields:_.fieldsByConfigId(R),style:T(R)};var C,e,E,t,n,N,r},_.objectTransform=function(R){return{tables:(C=R,E=i(C),Y(C),(e={})[U.TableType.DEFAULT]=[],t=e,C.dataResponse.tables.forEach(function(R){var C,e=R.rows.map((C=E,function(R){var e,E,t={};return(e=R,E=C,e.length<E.length?e.map(function(R,C){return[R,E[C]]}):E.map(function(R,C){return[e[C],R]})).forEach(function(R){var C=R[0],e=R[1];void 0===t[e]&&(t[e]=[]),t[e].push(C)},{}),t}));t[R.id]=e}),t),fields:_.fieldsByConfigId(R),style:T(R)};var C,e,E,t},_.subscribeToData=function(C,e){if(e.transform!==_.tableTransform&&e.transform!==_.objectTransform)throw new Error("Only the built in transform functions are supported.");var R=function(R){R.data.type===U.MessageType.RENDER?C(e.transform(R.data)):console.error("MessageType: "+R.data.type+" is not supported by this version of the library.")};window.addEventListener("message",R);var E=window.frameElement.getAttribute("componentid");return window.parent.postMessage({componentId:E,type:"vizReady"},"*"),function(){return window.removeEventListener("message",R)}}},"./src/types.ts":function(R,C,e){"use strict";var E,t,n,N,r;Object.defineProperty(C,"__esModule",{value:!0}),(E=C.ConceptType||(C.ConceptType={})).METRIC="METRIC",E.DIMENSION="DIMENSION",(C.MessageType||(C.MessageType={})).RENDER="RENDER",(t=C.FieldType||(C.FieldType={})).YEAR="YEAR",t.YEAR_QUARTER="YEAR_QUARTER",t.YEAR_MONTH="YEAR_MONTH",t.YEAR_WEEK="YEAR_WEEK",t.YEAR_MONTH_DAY="YEAR_MONTH_DAY",t.YEAR_MONTH_DAY_HOUR="YEAR_MONTH_DAY_HOUR",t.QUARTER="QUARTER",t.MONTH="MONTH",t.WEEK="WEEK",t.MONTH_DAY="MONTH_DAY",t.DAY_OF_WEEK="DAY_OF_WEEK",t.DAY="DAY",t.HOUR="HOUR",t.MINUTE="MINUTE",t.DURATION="DURATION",t.COUNTRY="COUNTRY",t.COUNTRY_CODE="COUNTRY_CODE",t.CONTINENT="CONTINENT",t.CONTINENT_CODE="CONTINENT_CODE",t.SUB_CONTINENT="SUB_CONTINENT",t.SUB_CONTINENT_CODE="SUB_CONTINENT_CODE",t.REGION="REGION",t.REGION_CODE="REGION_CODE",t.CITY="CITY",t.CITY_CODE="CITY_CODE",t.METRO_CODE="METRO_CODE",t.LATITUDE_LONGITUDE="LATITUDE_LONGITUDE",t.NUMBER="NUMBER",t.PERCENT="PERCENT",t.TEXT="TEXT",t.BOOLEAN="BOOLEAN",t.URL="URL",t.IMAGE="IMAGE",t.CURRENCY_AED="CURRENCY_AED",t.CURRENCY_ALL="CURRENCY_ALL",t.CURRENCY_ARS="CURRENCY_ARS",t.CURRENCY_AUD="CURRENCY_AUD",t.CURRENCY_BDT="CURRENCY_BDT",t.CURRENCY_BGN="CURRENCY_BGN",t.CURRENCY_BOB="CURRENCY_BOB",t.CURRENCY_BRL="CURRENCY_BRL",t.CURRENCY_CAD="CURRENCY_CAD",t.CURRENCY_CDF="CURRENCY_CDF",t.CURRENCY_CHF="CURRENCY_CHF",t.CURRENCY_CLP="CURRENCY_CLP",t.CURRENCY_CNY="CURRENCY_CNY",t.CURRENCY_COP="CURRENCY_COP",t.CURRENCY_CRC="CURRENCY_CRC",t.CURRENCY_CZK="CURRENCY_CZK",t.CURRENCY_DKK="CURRENCY_DKK",t.CURRENCY_DOP="CURRENCY_DOP",t.CURRENCY_EGP="CURRENCY_EGP",t.CURRENCY_ETB="CURRENCY_ETB",t.CURRENCY_EUR="CURRENCY_EUR",t.CURRENCY_GBP="CURRENCY_GBP",t.CURRENCY_HKD="CURRENCY_HKD",t.CURRENCY_HRK="CURRENCY_HRK",t.CURRENCY_HUF="CURRENCY_HUF",t.CURRENCY_IDR="CURRENCY_IDR",t.CURRENCY_ILS="CURRENCY_ILS",t.CURRENCY_INR="CURRENCY_INR",t.CURRENCY_IRR="CURRENCY_IRR",t.CURRENCY_ISK="CURRENCY_ISK",t.CURRENCY_JMD="CURRENCY_JMD",t.CURRENCY_JPY="CURRENCY_JPY",t.CURRENCY_KRW="CURRENCY_KRW",t.CURRENCY_LKR="CURRENCY_LKR",t.CURRENCY_LTL="CURRENCY_LTL",t.CURRENCY_MNT="CURRENCY_MNT",t.CURRENCY_MVR="CURRENCY_MVR",t.CURRENCY_MXN="CURRENCY_MXN",t.CURRENCY_MYR="CURRENCY_MYR",t.CURRENCY_NOK="CURRENCY_NOK",t.CURRENCY_NZD="CURRENCY_NZD",t.CURRENCY_PAB="CURRENCY_PAB",t.CURRENCY_PEN="CURRENCY_PEN",t.CURRENCY_PHP="CURRENCY_PHP",t.CURRENCY_PKR="CURRENCY_PKR",t.CURRENCY_PLN="CURRENCY_PLN",t.CURRENCY_RON="CURRENCY_RON",t.CURRENCY_RSD="CURRENCY_RSD",t.CURRENCY_RUB="CURRENCY_RUB",t.CURRENCY_SAR="CURRENCY_SAR",t.CURRENCY_SEK="CURRENCY_SEK",t.CURRENCY_SGD="CURRENCY_SGD",t.CURRENCY_THB="CURRENCY_THB",t.CURRENCY_TRY="CURRENCY_TRY",t.CURRENCY_TWD="CURRENCY_TWD",t.CURRENCY_TZS="CURRENCY_TZS",t.CURRENCY_UAH="CURRENCY_UAH",t.CURRENCY_USD="CURRENCY_USD",t.CURRENCY_UYU="CURRENCY_UYU",t.CURRENCY_VEF="CURRENCY_VEF",t.CURRENCY_VND="CURRENCY_VND",t.CURRENCY_YER="CURRENCY_YER",t.CURRENCY_ZAR="CURRENCY_ZAR",(n=C.TableType||(C.TableType={})).DEFAULT="DEFAULT",n.COMPARISON="COMPARISON",n.SUMMARY="SUMMARY",(N=C.ConfigDataElementType||(C.ConfigDataElementType={})).METRIC="METRIC",N.DIMENSION="DIMENSION",N.SORT="SORT",N.MAX_RESULTS="MAX_RESULTS",(r=C.ConfigStyleElementType||(C.ConfigStyleElementType={})).TEXTINPUT="TEXTINPUT",r.SELECT_SINGLE="SELECT_SINGLE",r.CHECKBOX="CHECKBOX",r.FONT_COLOR="FONT_COLOR",r.FONT_SIZE="FONT_SIZE",r.FONT_FAMILY="FONT_FAMILY",r.FILL_COLOR="FILL_COLOR",r.BORDER_COLOR="BORDER_COLOR",r.AXIS_COLOR="AXIS_COLOR",r.GRID_COLOR="GRID_COLOR",r.OPACITY="OPACITY",r.LINE_WEIGHT="LINE_WEIGHT",r.LINE_STYLE="LINE_STYLE",r.BORDER_RADIUS="BORDER_RADIUS",r.INTERVAL="INTERVAL",r.SELECT_RADIO="SELECT_RADIO"}})});